<template>
  <div id="home">
<!--    <slot></slot>-->
<!--    <pagebtn></pagebtn>-->
<!--      <h2>111111</h2>-->
      <div id="context">
          <context-home-tab-bar :goods1="goods"></context-home-tab-bar>
      </div>
      <div id="page">
          <page :length="goods.length" @page="Page"></page>
      </div>
  </div>
</template>

<script>
// @ is an alias to /src

import ContextHomeTabBar from "./ContextHomeTabBar";
import ScroUp from "../../components/ScrollUp/ScroUp";
import Page from "./components/Page";
import {request} from "../../network";

export default {
  name: 'Home',
  components: {
    // pagebtn
      ContextHomeTabBar,
      ScroUp,
      Page
  },
    data(){
      return{
          goods:[
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1222222222222222222222222222222222222222222222222222222222222222222222222222222222',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:1,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品1',
                  price:111.1,
                  number:13,
              },
              {
                  id:2,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品2',
                  price:222.1,
                  number:55,
              },
              {
                  id:3,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品3',
                  price:333.1,
                  number:342,
              },
              {
                  id:4,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品4',
                  price:44.1,
                  number:6,
              },
              {
                  id:5,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品5',
                  price:23.1,
                  number:1,
              },
              {
                  id:5,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品5',
                  price:23.1,
                  number:1,
              },
              {
                  id:5,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品5',
                  price:23.1,
                  number:1,
              },
              {
                  id:5,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品5',
                  price:23.1,
                  number:1,
              },
              {
                  id:5,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品5',
                  price:23.1,
                  number:1,
              },
              {
                  id:5,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品5',
                  price:23.1,
                  number:1,
              },
              {
                  id:5,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品5',
                  price:23.1,
                  number:1,
              },
              {
                  id:61,
                  img:"//img10.360buyimg.com/seckillcms/s250x250_jfs/t1/151148/36/13226/146005/5feb0c7aE08af0da9/fd628191f0e43cf5.jpg",
                  name:'商品61',
                  price:66.1,
                  number:4,
              }
          ]
          // goods:[{}]
      }
    },
    methods:{
        Page(val){
            console.log("返回页数：" + val);
            request({
                url:'/queryGoodsPage.do',
                methods: 'post',
                data:{
                    page:val,
                    limit:40
                }
            }).then(res=>{
                //分页返回
                this.goods=res.data
            }).catch(error=>{
                console.log('请求商品下一页失败');
            })
        }
    },
    created() {
        console.log('请求首页数据');
        console.log('请求首页数据');

        request({
            url:'/queryGoodsPage.do',
            method:'post',
            data:{
                page:0,
                limit:40
            }
        }).then(res=>{
            console.log("请求成功："+res);
            console.log(res);
            console.log("111111111111")
            console.log(res.data);
            console.log("11:"+this.goods[0].name);
            // this.goods =JSON.stringify(res.data)
            this.goods =res.data
            // console.log(JSON.stringify(this.goods), this.goods)
            console.log("2222222")
            console.log("22:"+this.goods[0].goo_name);
            console.log(this.goods.length);
        }).catch(err=>{
            console.log(err);
        })
    }
}
</script>
<style>
    #home{
        margin-left: 120px;
        display: flex;
        flex-direction: column;
    }
    #context{
        float: top;
    }
    #page{
        float: left;
        width: 1323px;
        height: 49px;
        margin-left: 9px;
        border: 2px solid red;
    }
</style>